<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/svelte-fluent/favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="/svelte-fluent/_app/immutable/assets/0.iLfSiGeT.css" rel="stylesheet">
		<link href="/svelte-fluent/_app/immutable/assets/2.DkwTgxLK.css" rel="stylesheet">
		<link href="/svelte-fluent/_app/immutable/assets/en.GDt0QtHe.css" rel="stylesheet">
		<link href="/svelte-fluent/_app/immutable/assets/6.DRmeVqd_.css" rel="stylesheet">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/entry/start.BMPuOhI3.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/B9EdLtjf.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/4NjQPSOq.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/DMBnIors.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/CYgJF_JY.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/DmlMHQUp.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/entry/app.CYXkrb19.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/BgFAwnUP.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/BX7aGI6g.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/BnDN_DaJ.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/iK8c7f0D.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/CKxF7mxD.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/nodes/0.BheFlp_S.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/BzNaENU3.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/BrJt0Bfs.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/Dsj0DoWn.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/Cq3lCfSJ.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/CbMxbwOw.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/B1hMXq3l.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/DIKHSu49.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/nodes/2._gRJ-cfO.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/Cpc0C8Yv.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/Buyih9aj.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/BiAkg_nH.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/rYN9nJJV.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/gOZCAgVZ.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/BEPero-Z.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/H8fx6OYh.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/hab4R_pG.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/B2f89B6K.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/CC4cNy4I.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/C9Yu8Yeb.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/IPqrQ9Sk.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/B8cpLfL8.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/D7rigRlM.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/C4Vlmd0Q.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/DJOkIQ7F.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/Zi2APG72.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/DKdupIdf.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/J9gKq2D_.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/CboShGX-.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/DQ-Dvdce.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/chunks/DgFz3d_U.js">
		<link rel="modulepreload" href="/svelte-fluent/_app/immutable/nodes/6.BpT9u2-U.js"><!--[--><!--[--><meta name="description" content="Integration"><!--]--><!--]--><title>Integration | svelte-fluent</title>
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><div class="stack" style="--gap: var(--s2);"><div class="header svelte-1nzesp5"><header class="svelte-w784mn"><nav aria-label="Primary" class="cluster" style="--justify: space-between;"><div class="cluster"><a class="logo svelte-w784mn" href="/svelte-fluent/"><!---->
<svg width="100%" height="100%" viewBox="0 0 180 120" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;display:block;">
		<g transform="matrix(1,0,0,1,-300,-390)">
				<g transform="matrix(1,0,0,1,10,-177.124)">
						<g id="Logo">
								<g id="Right" transform="matrix(1,0,0,1,-530,-32.8761)">
										<path d="M900,620l90,0c5.523,0 10,4.477 10,10l0,80c-0,5.523 -4.477,10 -10,10l-90,0l0,-100Z" style="fill:rgb(224,224,224);"/>
										<g transform="matrix(1,0,0,1,900,620)">
												<g transform="matrix(60,0,0,60,20,73.4668)">
														<path d="M0.026,-0.68l0.409,-0c-0.011,-0.033 -0.024,-0.074 -0.041,-0.123l0.149,-0.03c0.024,0.064 0.043,0.115 0.056,0.153l0.372,-0l-0,0.132l-0.145,-0c-0.049,0.147 -0.12,0.272 -0.213,0.374c0.101,0.07 0.224,0.122 0.371,0.159c-0.054,0.066 -0.089,0.113 -0.107,0.143c-0.149,-0.049 -0.275,-0.115 -0.379,-0.197c-0.104,0.079 -0.233,0.147 -0.385,0.203c-0.035,-0.056 -0.067,-0.104 -0.097,-0.141c0.146,-0.046 0.268,-0.102 0.367,-0.169c-0.094,-0.105 -0.16,-0.229 -0.199,-0.372l-0.158,-0l0,-0.132Zm0.634,0.132l-0.326,-0c0.034,0.106 0.088,0.199 0.164,0.277c0.075,-0.079 0.129,-0.171 0.162,-0.277Z" style="fill:rgb(80,24,134);fill-rule:nonzero;"/>
												</g>
										</g>
								</g>
								<g id="Fold" transform="matrix(0.4,0,0,1,10,-32.8761)">
										<path d="M900,700l0,20l100,-20l-100,0Z" style="fill:rgb(58,168,90);"/>
								</g>
								<g id="Left" transform="matrix(0.857143,0,0,1,-395.714,-32.8761)">
										<path d="M800,610c0,-5.523 5.223,-10 11.667,-10c26.378,0 88.333,0 88.333,0l40,100l-128.333,0c-6.444,-0 -11.667,-4.477 -11.667,-10l0,-80Z" style="fill:rgb(124,234,156);"/>
								</g>
								<g id="Svelte" transform="matrix(0.598536,0,0,0.598536,-232.485,293.914)">
										<g transform="matrix(1,0,0,1,906.5,476)">
												<path d="M94.157,22.819c-10.4,-14.885 -30.94,-19.297 -45.792,-9.835l-26.082,16.624c-7.122,4.48 -12.033,11.762 -13.519,20.043c-1.244,6.9 -0.15,14.022 3.107,20.231c-2.232,3.387 -3.755,7.192 -4.476,11.183c-1.5,8.441 0.465,17.14 5.448,24.116c10.402,14.886 30.942,19.297 45.791,9.835l26.083,-16.624c7.121,-4.479 12.033,-11.762 13.518,-20.043c1.244,-6.9 0.151,-14.022 -3.105,-20.232c2.232,-3.387 3.754,-7.191 4.474,-11.182c1.502,-8.441 -0.463,-17.14 -5.447,-24.116" style="fill:rgb(58,168,90);fill-rule:nonzero;"/>
										</g>
										<g transform="matrix(1,0,0,1,906.5,476)">
												<path d="M45.817,106.582c-8.388,2.18 -17.297,-1.122 -22.237,-8.243c-2.997,-4.195 -4.179,-9.427 -3.277,-14.503c0.152,-0.825 0.36,-1.639 0.624,-2.435l0.491,-1.498l1.336,0.981c3.086,2.268 6.537,3.992 10.203,5.098l0.97,0.294l-0.09,0.968c-0.118,1.376 0.255,2.75 1.052,3.878c1.487,2.145 4.169,3.141 6.696,2.485c0.566,-0.152 1.107,-0.389 1.602,-0.704l26.083,-16.622c1.29,-0.812 2.18,-2.131 2.451,-3.631c0.27,-1.53 -0.086,-3.106 -0.988,-4.371c-1.487,-2.146 -4.171,-3.142 -6.698,-2.487c-0.566,0.152 -1.105,0.389 -1.6,0.704l-9.953,6.345c-1.637,1.041 -3.423,1.825 -5.296,2.326c-8.388,2.181 -17.297,-1.122 -22.237,-8.243c-2.997,-4.195 -4.179,-9.426 -3.277,-14.502c0.894,-4.98 3.847,-9.359 8.13,-12.052l26.081,-16.623c1.638,-1.042 3.425,-1.827 5.3,-2.329c8.388,-2.18 17.297,1.122 22.237,8.243c2.997,4.195 4.179,9.427 3.277,14.503c-0.152,0.825 -0.361,1.639 -0.624,2.435l-0.491,1.498l-1.335,-0.98c-3.086,-2.269 -6.537,-3.994 -10.204,-5.1l-0.97,-0.294l0.09,-0.968c0.117,-1.376 -0.256,-2.75 -1.052,-3.878c-1.487,-2.145 -4.169,-3.14 -6.695,-2.485c-0.567,0.152 -1.108,0.389 -1.603,0.704l-26.083,16.623c-1.29,0.812 -2.179,2.13 -2.449,3.63c-0.272,1.53 0.084,3.107 0.986,4.372c1.487,2.145 4.171,3.141 6.698,2.486c0.566,-0.152 1.107,-0.389 1.602,-0.704l9.952,-6.343c1.636,-1.041 3.422,-1.827 5.296,-2.327c8.387,-2.181 17.297,1.121 22.236,8.242c2.998,4.195 4.179,9.427 3.277,14.503c-0.894,4.98 -3.848,9.359 -8.13,12.053l-26.081,16.622c-1.638,1.042 -3.425,1.827 -5.3,2.328" style="fill:white;fill-rule:nonzero;"/>
										</g>
								</g>
						</g>
				</g>
		</g>
</svg>
<!----><!----> svelte-fluent</a></div> <div class="cluster"><a href="/svelte-fluent/docs" class="svelte-w784mn">Docs</a> <a href="https://github.com/nubolab-ffwd/svelte-fluent" target="_blank" rel="noreferrer noopener" title="View on GitHub" class="svelte-w784mn"><div class="icon svelte-w784mn"><svg viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path></svg><!----></div></a></div></nav></header><!----></div> <div class="content svelte-1nzesp5"><!--[--><!----><div class="docs svelte-1mat08r"><div class="navigation svelte-1mat08r"><nav aria-label="Docs"><div class="menu svelte-10qzt39 toplevel"><ul class="svelte-10qzt39"><!--[--><li class="svelte-10qzt39"><div class="item svelte-10qzt39 has-submenu"><!--[--><a href="/svelte-fluent/docs/getting-started/" class="svelte-10qzt39">Getting started</a><!--]--></div> <!--[--><div class="menu svelte-10qzt39"><ul class="svelte-10qzt39"><!--[--><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/getting-started/#what-is-svelte-fluent" class="svelte-10qzt39">What is svelte-fluent?</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/getting-started/#installation" class="svelte-10qzt39">Installation</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/getting-started/#configure-bundler" class="svelte-10qzt39">Configure bundler</a><!--]--></div> <!--[!--><!--]--></li><!--]--></ul></div><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39 has-submenu"><!--[--><a href="/svelte-fluent/docs/version-1/" class="svelte-10qzt39">Version 1</a><!--]--></div> <!--[--><div class="menu svelte-10qzt39"><ul class="svelte-10qzt39"><!--[--><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/version-1/#whats-new" class="svelte-10qzt39">What’s new?</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/version-1/#breaking-changes" class="svelte-10qzt39">Breaking changes</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/version-1/#migration-guide" class="svelte-10qzt39">Migration Guide</a><!--]--></div> <!--[!--><!--]--></li><!--]--></ul></div><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39 has-submenu"><!--[--><a href="/svelte-fluent/docs/tutorial/" class="svelte-10qzt39">Tutorial</a><!--]--></div> <!--[--><div class="menu svelte-10qzt39"><ul class="svelte-10qzt39"><!--[--><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/tutorial/#first-steps" class="svelte-10qzt39">First steps</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/tutorial/#load-translations-from-files" class="svelte-10qzt39">Load translations from files</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/tutorial/#multiple-languages" class="svelte-10qzt39">Multiple languages</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/tutorial/#interpolation" class="svelte-10qzt39">Interpolation</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/tutorial/#interpolation-formatting" class="svelte-10qzt39">Interpolation formatting</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/tutorial/#custom-functions" class="svelte-10qzt39">Custom functions</a><!--]--></div> <!--[!--><!--]--></li><!--]--></ul></div><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39 has-submenu active"><!--[--><a href="/svelte-fluent/docs/integration/" class="svelte-10qzt39">Integration</a><!--]--></div> <!--[--><div class="menu svelte-10qzt39"><ul class="svelte-10qzt39"><!--[--><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/integration/#sveltekit" class="svelte-10qzt39">SvelteKit</a><!--]--></div> <!--[!--><!--]--></li><!--]--></ul></div><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39 has-submenu"><!--[--><a href="/svelte-fluent/docs/reference/" class="svelte-10qzt39">Reference</a><!--]--></div> <!--[--><div class="menu svelte-10qzt39"><ul class="svelte-10qzt39"><!--[--><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/reference/FluentContext/" class="svelte-10qzt39">FluentContext</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/reference/FluentProvider/" class="svelte-10qzt39">FluentProvider</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/reference/Localized/" class="svelte-10qzt39">Localized</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/reference/Overlay/" class="svelte-10qzt39">Overlay</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/reference/SvelteFluent/" class="svelte-10qzt39">SvelteFluent</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/reference/createSvelteFluent/" class="svelte-10qzt39">createSvelteFluent</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/reference/getFluentContext/" class="svelte-10qzt39">getFluentContext</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/reference/initFluentContext/" class="svelte-10qzt39">initFluentContext</a><!--]--></div> <!--[!--><!--]--></li><!--]--></ul></div><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39 has-submenu"><!--[--><a href="/svelte-fluent/docs/legacy/" class="svelte-10qzt39">Legacy</a><!--]--></div> <!--[--><div class="menu svelte-10qzt39"><ul class="svelte-10qzt39"><!--[--><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/legacy/Localized/" class="svelte-10qzt39">Localized</a><!--]--></div> <!--[!--><!--]--></li><li class="svelte-10qzt39"><div class="item svelte-10qzt39"><!--[--><a href="/svelte-fluent/docs/legacy/Overlay/" class="svelte-10qzt39">Overlay</a><!--]--></div> <!--[!--><!--]--></li><!--]--></ul></div><!--]--></li><!--]--></ul></div><!----></nav></div> <div class="content svelte-1mat08r"><div class="stack"><main class="stack svelte-1mat08r"><!----><h1 id="integration">Integration</h1> <h2 id="sveltekit"><a href="#sveltekit">SvelteKit</a></h2> <h3 id="initialize-a-sveltekit-app"><a href="#initialize-a-sveltekit-app">Initialize a SvelteKit app</a></h3> <p>Use <code>npm create</code> to initialize an new SvelteKit project called <code>svelte-fluent-sveltekit</code>.</p> <ul><li>Select “Skeleton project” when asked for the template</li> <li>Select “Yes, using TypeScript syntax” when asked for typescript type checking</li></ul> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#DCDCAA">npm</span><span style="color:#CE9178"> create</span><span style="color:#CE9178"> svelte@latest</span><span style="color:#CE9178"> svelte-fluent-sveltekit</span></span>
<span class="line"><span style="color:#DCDCAA">cd</span><span style="color:#CE9178"> svelte-fluent-sveltekit</span></span>
<span class="line"><span style="color:#DCDCAA">npm</span><span style="color:#CE9178"> install</span></span></code></pre><!----> <p>Now install <code>svelte-fluent</code>:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#DCDCAA">npm</span><span style="color:#CE9178"> install</span><span style="color:#569CD6"> --save-dev</span><span style="color:#CE9178"> @nubolab-ffwd/svelte-fluent</span></span>
<span class="line"><span style="color:#DCDCAA">npm</span><span style="color:#CE9178"> install</span><span style="color:#569CD6"> --save</span><span style="color:#CE9178"> jsdom</span></span></code></pre><!----> <p>We also need <code>@fluent/bundle</code> to parse the <code>.ftl</code> files:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#DCDCAA">npm</span><span style="color:#CE9178"> install</span><span style="color:#569CD6"> --save-dev</span><span style="color:#CE9178"> @fluent/bundle</span></span></code></pre><!----> <p>We will be using <code>@fluent/langneg</code> for selecting the displayed language based on
the browser’s <code>Accept-Language</code> header. Let’s install it with:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#DCDCAA">npm</span><span style="color:#CE9178"> install</span><span style="color:#569CD6"> --save-dev</span><span style="color:#CE9178"> @fluent/langneg</span></span></code></pre><!----> <p>Some features of <code>svelte-fluent</code> require a vite plugin to function.
Let’s add it to <code>vite.config.ts</code>:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#D4D4D4"> import &#123; sveltekit &#125; from '@sveltejs/kit/vite';</span></span>
<span class="line"><span style="color:#D4D4D4"> import &#123; defineConfig &#125; from 'vite';</span></span>
<span class="line"><span style="color:#B5CEA8">+import svelteFluent from '@nubolab-ffwd/svelte-fluent/vite';</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4"> export default defineConfig(&#123;</span></span>
<span class="line"><span style="color:#CE9178">-       plugins: [sveltekit()]</span></span>
<span class="line"><span style="color:#B5CEA8">+       plugins: [svelteFluent(), sveltekit()]</span></span>
<span class="line"><span style="color:#D4D4D4"> &#125;);</span></span>
<span class="line"></span></code></pre><!----> <h3 id="create-translation-files"><a href="#create-translation-files">Create translation files</a></h3> <p>Let’s create some translation files that we can use in our application:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#6A9955"># src/translations/en.ftl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4EC9B0">welcome = </span><span style="color:#CE9178">Welcome to svelte-fluent!</span></span></code></pre><!----> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#6A9955"># src/translations/de.ftl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4EC9B0">welcome = </span><span style="color:#CE9178">Willkommen bei svelte-fluent!</span></span></code></pre><!----> <h3 id="load-translations-and-select-language"><a href="#load-translations-and-select-language">Load translations and select language</a></h3> <p>Now that we have some translation files, we can load them.
We also want our app to respect the browser language settings of our visitors.
Let’s create some helpers for that in <code>src/lib/fluent.ts</code>:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#6A9955">// src/lib/fluent.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#D4D4D4"> &#123; </span><span style="color:#9CDCFE">FluentBundle</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">FluentResource</span><span style="color:#D4D4D4"> &#125; </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '@fluent/bundle'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#D4D4D4"> &#123; </span><span style="color:#9CDCFE">acceptedLanguages</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">negotiateLanguages</span><span style="color:#D4D4D4"> &#125; </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '@fluent/langneg'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#C586C0"> type</span><span style="color:#D4D4D4"> &#123; </span><span style="color:#9CDCFE">RequestEvent</span><span style="color:#D4D4D4"> &#125; </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '@sveltejs/kit'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#9CDCFE"> resourcesDe</span><span style="color:#C586C0"> from</span><span style="color:#CE9178"> '../translations/de.ftl'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#9CDCFE"> resourcesEn</span><span style="color:#C586C0"> from</span><span style="color:#CE9178"> '../translations/en.ftl'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> defaultLocale</span><span style="color:#D4D4D4"> = </span><span style="color:#CE9178">'en'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> resources</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">Record</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">FluentResource</span><span style="color:#D4D4D4">> = &#123;</span></span>
<span class="line"><span style="color:#9CDCFE">	de:</span><span style="color:#9CDCFE"> resourcesDe</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">	en:</span><span style="color:#9CDCFE"> resourcesEn</span></span>
<span class="line"><span style="color:#D4D4D4">&#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> function</span><span style="color:#DCDCAA"> generateBundles</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">locale</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">FluentBundle</span><span style="color:#D4D4D4">[] &#123;</span></span>
<span class="line"><span style="color:#569CD6">	const</span><span style="color:#4FC1FF"> bundle</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">new</span><span style="color:#DCDCAA"> FluentBundle</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">locale</span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#9CDCFE">	bundle</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">addResource</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resources</span><span style="color:#D4D4D4">[</span><span style="color:#9CDCFE">locale</span><span style="color:#D4D4D4">]);</span></span>
<span class="line"><span style="color:#C586C0">	return</span><span style="color:#D4D4D4"> [</span><span style="color:#9CDCFE">bundle</span><span style="color:#D4D4D4">];</span></span>
<span class="line"><span style="color:#D4D4D4">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> function</span><span style="color:#DCDCAA"> negotiateLocale</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">ev</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">RequestEvent</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> &#123;</span></span>
<span class="line"><span style="color:#569CD6">	const</span><span style="color:#4FC1FF"> accepted</span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA">acceptedLanguages</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">ev</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">request</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">headers</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">get</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">'accept-language'</span><span style="color:#D4D4D4">) ?? </span><span style="color:#CE9178">''</span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#C586C0">	return</span><span style="color:#D4D4D4"> (</span></span>
<span class="line"><span style="color:#DCDCAA">		negotiateLanguages</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">accepted</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">Object</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">keys</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resources</span><span style="color:#D4D4D4">), &#123;</span></span>
<span class="line"><span style="color:#9CDCFE">			defaultLocale</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">			strategy:</span><span style="color:#CE9178"> 'lookup'</span></span>
<span class="line"><span style="color:#D4D4D4">		&#125;).</span><span style="color:#DCDCAA">at</span><span style="color:#D4D4D4">(</span><span style="color:#B5CEA8">0</span><span style="color:#D4D4D4">) ?? </span><span style="color:#9CDCFE">defaultLocale</span></span>
<span class="line"><span style="color:#D4D4D4">	);</span></span>
<span class="line"><span style="color:#D4D4D4">&#125;</span></span></code></pre><!----> <p>Typescript will complain about the imports of the <code>.ftl</code> files.
Don’t worry, we’ll fix this in a moment.</p> <h3 id="add-server-hook"><a href="#add-server-hook">Add server hook</a></h3> <p>We need to add a <a href="https://kit.svelte.dev/docs/hooks#server-hooks" rel="noopener noreferrer" target="_blank">SvelteKit server hook</a> that selects the appropriate locale and creates the <a href="/svelte-fluent/docs/reference/SvelteFluent/">SvelteFluent</a><!----> object.</p> <p>Let’s use the new helpers we created to build the hook:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#6A9955">// src/hooks.server.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#D4D4D4"> &#123; </span><span style="color:#9CDCFE">generateBundles</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">negotiateLocale</span><span style="color:#D4D4D4"> &#125; </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '$lib/fluent'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#C586C0"> type</span><span style="color:#D4D4D4"> &#123; </span><span style="color:#9CDCFE">Handle</span><span style="color:#D4D4D4"> &#125; </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '@sveltejs/kit'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#D4D4D4"> &#123; </span><span style="color:#9CDCFE">createSvelteFluent</span><span style="color:#D4D4D4"> &#125; </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '@nubolab-ffwd/svelte-fluent'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> const</span><span style="color:#DCDCAA"> handle</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">Handle</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">async</span><span style="color:#D4D4D4"> (&#123; </span><span style="color:#9CDCFE">event</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4"> &#125;) </span><span style="color:#569CD6">=></span><span style="color:#D4D4D4"> &#123;</span></span>
<span class="line"><span style="color:#9CDCFE">	event</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">locals</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">locale</span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA">negotiateLocale</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">event</span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#9CDCFE">	event</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">locals</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">fluent</span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA">createSvelteFluent</span><span style="color:#D4D4D4">(</span><span style="color:#DCDCAA">generateBundles</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">event</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">locals</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">locale</span><span style="color:#D4D4D4">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">	return</span><span style="color:#DCDCAA"> resolve</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">event</span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#D4D4D4">&#125;;</span></span></code></pre><!----> <p>Now Typescript will complain about <code>event.locals.locale</code> and <code>event.locals.fluent</code>.
To fix this we need to modify our <code>src/app.d.ts</code>:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#B5CEA8">+import '@nubolab-ffwd/svelte-fluent/types';</span></span>
<span class="line"><span style="color:#B5CEA8">+import &#123; SvelteFluent &#125; from '@nubolab-ffwd/svelte-fluent';</span></span>
<span class="line"><span style="color:#B5CEA8">+</span></span>
<span class="line"><span style="color:#D4D4D4"> // See https://kit.svelte.dev/docs/types#app</span></span>
<span class="line"><span style="color:#D4D4D4"> // for information about these interfaces</span></span>
<span class="line"><span style="color:#D4D4D4"> declare global &#123;</span></span>
<span class="line"><span style="color:#D4D4D4">        namespace App &#123;</span></span>
<span class="line"><span style="color:#D4D4D4">                // interface Error &#123;&#125;</span></span>
<span class="line"><span style="color:#CE9178">-               // interface Locals &#123;&#125;</span></span>
<span class="line"><span style="color:#B5CEA8">+               interface Locals &#123;</span></span>
<span class="line"><span style="color:#B5CEA8">+                       locale: string;</span></span>
<span class="line"><span style="color:#B5CEA8">+                       fluent: SvelteFluent;</span></span>
<span class="line"><span style="color:#B5CEA8">+               &#125;</span></span>
<span class="line"><span style="color:#D4D4D4">                // interface PageData &#123;&#125;</span></span>
<span class="line"><span style="color:#D4D4D4">                // interface PageState &#123;&#125;</span></span>
<span class="line"><span style="color:#D4D4D4">                // interface Platform &#123;&#125;</span></span></code></pre><!----> <h3 id="client-integration"><a href="#client-integration">Client integration</a></h3> <p>On the client side, it’s impossible to access <code>event.locals.locale</code> and <code>event.locals.fluent</code> that we added in the server hook. We need some additional
code to bridge the gap.</p> <p>Let’s start by adding a <code>src/routes/+layout.server.ts</code>:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#6A9955">// src/routes/+layout.server.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> function</span><span style="color:#DCDCAA"> load</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">event</span><span style="color:#D4D4D4">) &#123;</span></span>
<span class="line"><span style="color:#6A9955">	// expose selected locale from hook to client</span></span>
<span class="line"><span style="color:#C586C0">	return</span><span style="color:#D4D4D4"> &#123; </span><span style="color:#9CDCFE">locale:</span><span style="color:#9CDCFE"> event</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">locals</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">locale</span><span style="color:#D4D4D4"> &#125;;</span></span>
<span class="line"><span style="color:#D4D4D4">&#125;</span></span></code></pre><!----> <p>This exposes <code>event.locals.locale</code> as <code>event.data.locale</code> on the client.
We also need the <a href="/svelte-fluent/docs/reference/SvelteFluent/">SvelteFluent</a><!----> object which we can create in <code>src/routes/+layout.ts</code>:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#6A9955">// src/routes/+layout.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#D4D4D4"> &#123; </span><span style="color:#9CDCFE">generateBundles</span><span style="color:#D4D4D4"> &#125; </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '$lib/fluent'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#D4D4D4"> &#123; </span><span style="color:#9CDCFE">createSvelteFluent</span><span style="color:#D4D4D4"> &#125; </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '@nubolab-ffwd/svelte-fluent'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> function</span><span style="color:#DCDCAA"> load</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">event</span><span style="color:#D4D4D4">) &#123;</span></span>
<span class="line"><span style="color:#C586C0">	return</span><span style="color:#D4D4D4"> &#123;</span></span>
<span class="line"><span style="color:#D4D4D4">		...</span><span style="color:#9CDCFE">event</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">		fluent:</span><span style="color:#DCDCAA"> createSvelteFluent</span><span style="color:#D4D4D4">(</span><span style="color:#DCDCAA">generateBundles</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">event</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">locale</span><span style="color:#D4D4D4">))</span></span>
<span class="line"><span style="color:#D4D4D4">	&#125;;</span></span>
<span class="line"><span style="color:#D4D4D4">&#125;</span></span></code></pre><!----> <p>Now we can access the <a href="/svelte-fluent/docs/reference/SvelteFluent/">SvelteFluent</a><!----> object via <code>event.data.fluent</code> and
use it to initialize the <a href="/svelte-fluent/docs/reference/FluentContext/">FluentContext</a><!----> in <code>src/routes/+layout.svelte</code> which
is required for using the <a href="/svelte-fluent/docs/reference/Localized/">Localized</a><!----> and <a href="/svelte-fluent/docs/reference/Overlay/">Overlay</a><!----> components.</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#6A9955">&#x3C;!-- src/routes/+layout.svelte --></span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">script</span><span style="color:#9CDCFE"> lang</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"ts"</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#C586C0">	import</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE">initFluentContext</span><span style="color:#D4D4D4"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '@nubolab-ffwd/svelte-fluent'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">	import</span><span style="color:#C586C0"> type</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE">PageData</span><span style="color:#D4D4D4"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> './$types'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">	import</span><span style="color:#C586C0"> type</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE">Snippet</span><span style="color:#D4D4D4"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> 'svelte'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6">	let</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">children</span><span style="color:#D4D4D4"> }: { </span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">PageData</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE">children</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">Snippet</span><span style="color:#D4D4D4"> } = $</span><span style="color:#DCDCAA">props</span><span style="color:#D4D4D4">();</span></span>
<span class="line"><span style="color:#DCDCAA">	initFluentContext</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=></span><span style="color:#9CDCFE"> data</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">fluent</span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">script</span><span style="color:#808080">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4">{@</span><span style="color:#569CD6">render</span><span style="color:#DCDCAA"> children</span><span style="color:#D4D4D4">()}</span></span>
<span class="line"></span></code></pre><!----> <h3 id="render-your-first-localized-message"><a href="#render-your-first-localized-message">Render your first localized message</a></h3> <p>With all the setup work complete, it’s finally time to render your first
localized message in <code>src/routes/+page.svelte</code>:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#6A9955">&#x3C;!-- src/routes/+page.svelte --></span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">script</span><span style="color:#9CDCFE"> lang</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"ts"</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#C586C0">	import</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE">Localized</span><span style="color:#D4D4D4"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '@nubolab-ffwd/svelte-fluent'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">script</span><span style="color:#808080">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">h1</span><span style="color:#808080">>&#x3C;</span><span style="color:#4EC9B0">Localized</span><span style="color:#9CDCFE"> id</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"welcome"</span><span style="color:#808080"> />&#x3C;/</span><span style="color:#569CD6">h1</span><span style="color:#808080">></span></span>
<span class="line"></span></code></pre><!----> <h3 id="launch-the-app"><a href="#launch-the-app">Launch the app</a></h3> <p>Now we have all the pieces in place and can open the app. Run this in a terminal:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#DCDCAA">npm</span><span style="color:#CE9178"> run</span><span style="color:#CE9178"> dev</span></span></code></pre><!----> <p>Open your browser and go to <a href="http://localhost:5173" rel="noopener noreferrer" target="_blank">http://localhost:5173</a> and you should see the app.</p> <p><a href="/svelte-fluent/_app/immutable/assets/screenshot.M7RKde9P.png?w=500;900;1200&amp;avif&amp;metadata"><img src="/svelte-fluent/_app/immutable/assets/screenshot.M7RKde9P.png?w=500;900;1200&amp;avif&amp;metadata" alt="Screenshot of the opened browser window" class="svelte-f7h00e"></a></p> <h3 id="bonus-server-side-localization"><a href="#bonus-server-side-localization">Bonus: server-side localization</a></h3> <p>We want to extend our application with a form. The form should validate inputs
and generate localized error messages if validation fails.</p> <p>Let’s start by adding some additional messages to our translation files:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#D4D4D4"> # src/translations/en.ftl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4"> welcome = Welcome to svelte-fluent!</span></span>
<span class="line"><span style="color:#B5CEA8">+</span></span>
<span class="line"><span style="color:#B5CEA8">+example-form =</span></span>
<span class="line"><span style="color:#B5CEA8">+  .heading = Example form</span></span>
<span class="line"><span style="color:#B5CEA8">+  .name-field-label = Name</span></span>
<span class="line"><span style="color:#B5CEA8">+  .submit-label = Submit</span></span>
<span class="line"><span style="color:#B5CEA8">+  .name-required-error = Name must not be empty</span></span>
<span class="line"><span style="color:#B5CEA8">+  .success-message = Form was submitted successfully!</span></span></code></pre><!----> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#D4D4D4"> # src/translations/de.ftl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4"> welcome = Willkommen bei svelte-fluent!</span></span>
<span class="line"><span style="color:#B5CEA8">+</span></span>
<span class="line"><span style="color:#B5CEA8">+example-form =</span></span>
<span class="line"><span style="color:#B5CEA8">+  .heading = Beispielformular</span></span>
<span class="line"><span style="color:#B5CEA8">+  .name-field-label = Name</span></span>
<span class="line"><span style="color:#B5CEA8">+  .submit-label = Absenden</span></span>
<span class="line"><span style="color:#B5CEA8">+  .name-required-error = Name darf nicht leer sein</span></span>
<span class="line"><span style="color:#B5CEA8">+  .success-message = Formular wurde erfolgreich abgeschickt!</span></span></code></pre><!----> <p>Next we add a form to <code>src/routes/+page.svelte</code>:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#D4D4D4"> &#x3C;/script></span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4"> &#x3C;h1>&#x3C;Localized id="welcome" />&#x3C;/h1></span></span>
<span class="line"><span style="color:#B5CEA8">+</span></span>
<span class="line"><span style="color:#B5CEA8">+&#x3C;Localized id="example-form"></span></span>
<span class="line"><span style="color:#B5CEA8">+       &#123;#snippet children(&#123; attrs &#125;)&#125;</span></span>
<span class="line"><span style="color:#B5CEA8">+               &#x3C;h2>&#123;attrs.heading&#125;&#x3C;/h2></span></span>
<span class="line"><span style="color:#B5CEA8">+               &#x3C;form method="POST"></span></span>
<span class="line"><span style="color:#B5CEA8">+                       &#x3C;label></span></span>
<span class="line"><span style="color:#B5CEA8">+                               &#123;attrs['name-field-label']&#125;</span></span>
<span class="line"><span style="color:#B5CEA8">+                               &#x3C;input name="name" /></span></span>
<span class="line"><span style="color:#B5CEA8">+                       &#x3C;/label></span></span>
<span class="line"><span style="color:#B5CEA8">+                       &#x3C;button>&#123;attrs['submit-label']&#125;&#x3C;/button></span></span>
<span class="line"><span style="color:#B5CEA8">+               &#x3C;/form></span></span>
<span class="line"><span style="color:#B5CEA8">+       &#123;/snippet&#125;</span></span>
<span class="line"><span style="color:#B5CEA8">+&#x3C;/Localized></span></span></code></pre><!----> <p>Also we need to add a <a href="https://kit.svelte.dev/docs/form-actions" rel="noopener noreferrer" target="_blank">SvelteKit form action</a> to <code>src/routes/+page.server.ts</code>:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#C586C0">import</span><span style="color:#D4D4D4"> &#123; </span><span style="color:#9CDCFE">fail</span><span style="color:#D4D4D4"> &#125; </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '@sveltejs/kit'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#C586C0"> type</span><span style="color:#D4D4D4"> &#123; </span><span style="color:#9CDCFE">Actions</span><span style="color:#D4D4D4"> &#125; </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> './$types'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> const</span><span style="color:#4FC1FF"> actions</span><span style="color:#D4D4D4"> = &#123;</span></span>
<span class="line"><span style="color:#DCDCAA">	default</span><span style="color:#9CDCFE">:</span><span style="color:#569CD6"> async</span><span style="color:#D4D4D4"> (&#123; </span><span style="color:#9CDCFE">request</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">locals</span><span style="color:#D4D4D4">: &#123; </span><span style="color:#9CDCFE">fluent</span><span style="color:#D4D4D4"> &#125; &#125;) </span><span style="color:#569CD6">=></span><span style="color:#D4D4D4"> &#123;</span></span>
<span class="line"><span style="color:#569CD6">		const</span><span style="color:#4FC1FF"> data</span><span style="color:#D4D4D4"> = </span><span style="color:#C586C0">await</span><span style="color:#9CDCFE"> request</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">formData</span><span style="color:#D4D4D4">();</span></span>
<span class="line"><span style="color:#569CD6">		const</span><span style="color:#4FC1FF"> name</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">get</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">'name'</span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#C586C0">		if</span><span style="color:#D4D4D4"> (!</span><span style="color:#9CDCFE">name</span><span style="color:#D4D4D4"> || !</span><span style="color:#9CDCFE">name</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">toString</span><span style="color:#D4D4D4">().</span><span style="color:#DCDCAA">trim</span><span style="color:#D4D4D4">()) &#123;</span></span>
<span class="line"><span style="color:#6A9955">			// render the localized error message</span></span>
<span class="line"><span style="color:#569CD6">			const</span><span style="color:#4FC1FF"> error</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">fluent</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">localize</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">'example-form.name-required-error'</span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#C586C0">			return</span><span style="color:#DCDCAA"> fail</span><span style="color:#D4D4D4">(</span><span style="color:#B5CEA8">400</span><span style="color:#D4D4D4">, &#123; </span><span style="color:#9CDCFE">name</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">error</span><span style="color:#D4D4D4"> &#125;);</span></span>
<span class="line"><span style="color:#D4D4D4">		&#125;</span></span>
<span class="line"><span style="color:#C586C0">		return</span><span style="color:#D4D4D4"> &#123; </span><span style="color:#9CDCFE">success:</span><span style="color:#569CD6"> true</span><span style="color:#D4D4D4"> &#125;;</span></span>
<span class="line"><span style="color:#D4D4D4">	&#125;</span></span>
<span class="line"><span style="color:#D4D4D4">&#125; </span><span style="color:#C586C0">satisfies</span><span style="color:#4EC9B0"> Actions</span><span style="color:#D4D4D4">;</span></span></code></pre><!----> <p>And finally, we need to handle the response from the action in our form in <code>src/routes/+page.svelte</code>:</p> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#D4D4D4"> &#x3C;script lang="ts"></span></span>
<span class="line"><span style="color:#D4D4D4">        import { Localized } from '@nubolab-ffwd/svelte-fluent';</span></span>
<span class="line"><span style="color:#B5CEA8">+       import type { ActionData } from './$types';</span></span>
<span class="line"><span style="color:#B5CEA8">+</span></span>
<span class="line"><span style="color:#B5CEA8">+       let { form }: { form: ActionData } = $props();</span></span>
<span class="line"><span style="color:#D4D4D4"> &#x3C;/script></span></span>
<span class="line"></span></code></pre><!----> <!----><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#D4D4D4"> &#x3C;Localized id="example-form"></span></span>
<span class="line"><span style="color:#D4D4D4">        &#123;#snippet children(&#123; attrs &#125;)&#125;</span></span>
<span class="line"><span style="color:#D4D4D4">                &#x3C;h2>&#123;attrs.heading&#125;&#x3C;/h2></span></span>
<span class="line"><span style="color:#B5CEA8">+</span></span>
<span class="line"><span style="color:#B5CEA8">+               &#123;#if form?.success&#125;</span></span>
<span class="line"><span style="color:#B5CEA8">+                       &#x3C;p>&#123;attrs['success-message']&#125;&#x3C;/p></span></span>
<span class="line"><span style="color:#B5CEA8">+               &#123;/if&#125;</span></span>
<span class="line"><span style="color:#B5CEA8">+</span></span>
<span class="line"><span style="color:#D4D4D4">                &#x3C;form method="POST"></span></span>
<span class="line"><span style="color:#B5CEA8">+                       &#123;#if form?.error&#125;&#x3C;p class="error">&#123;form.error&#125;&#x3C;/p>&#123;/if&#125;</span></span>
<span class="line"><span style="color:#D4D4D4">                        &#x3C;label></span></span>
<span class="line"><span style="color:#D4D4D4">                                &#123;attrs['name-field-label']&#125;</span></span>
<span class="line"><span style="color:#CE9178">-                               &#x3C;input name="name" /></span></span>
<span class="line"><span style="color:#B5CEA8">+                               &#x3C;input name="name" value=&#123;form?.name ?? ''&#125; /></span></span>
<span class="line"><span style="color:#D4D4D4">                        &#x3C;/label></span></span>
<span class="line"><span style="color:#D4D4D4">                        &#x3C;button>&#123;attrs['submit-label']&#125;&#x3C;/button></span></span>
<span class="line"><span style="color:#D4D4D4">                &#x3C;/form></span></span></code></pre><!----> <p>Now open your browser and go to <a href="http://localhost:5173" rel="noopener noreferrer" target="_blank">http://localhost:5173</a> and you should see
the new form that displays localized error messages when you submit it.</p> <p><a href="/svelte-fluent/_app/immutable/assets/screenshot-bonus.CjCXoK-w.png"><img src="/svelte-fluent/_app/immutable/assets/screenshot-bonus.CjCXoK-w.png" alt="Screenshot of the opened browser window" class="svelte-f7h00e"></a></p> <h3 id="whats-next"><a href="#whats-next">What’s next?</a></h3> <p>You now have a fully functional application where you can localize messages with <code>svelte-fluent</code>.</p> <p>You can learn more about how to use <code>svelte-fluent</code> in the <a href="../tutorial">Tutorial</a> or check out the <a href="../reference">Reference</a> for API documentation.</p><!----><!----></main> <hr class="svelte-1mat08r"> <nav><div class="prev-next svelte-16bgkg4"><!--[--><a class="prev svelte-16bgkg4" href="/svelte-fluent/docs/tutorial/"><span class="desc svelte-16bgkg4">Previous page</span> <span class="text svelte-16bgkg4">Tutorial</span></a><!--]--> <!--[--><a class="next svelte-16bgkg4" href="/svelte-fluent/docs/reference/"><span class="desc svelte-16bgkg4">Next page</span> <span class="text svelte-16bgkg4">Reference</span></a><!--]--></div><!----></nav></div></div></div><!----><!--]--><!----></div></div><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_rtu7n5 = {
						base: "/svelte-fluent",
						assets: "/svelte-fluent"
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("/svelte-fluent/_app/immutable/entry/start.BMPuOhI3.js"),
						import("/svelte-fluent/_app/immutable/entry/app.CYXkrb19.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 6],
							data: [null,null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
