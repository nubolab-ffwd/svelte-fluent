import"./NZTpNUN0.js";import"./BD-Rt00z.js";import{F as M,q as P,G as R,a9 as I,ba as q,p as C,f as u,aV as B,d as m,b as d,c as b,bc as j,a3 as z,r as h,h as i,aS as U,ap as H,aw as V,s as D,ax as X,az as G,an as k,a as Q,t as W,aQ as Y,e as Z}from"./BC1-TqXS.js";import{q as J,F as O,t as K,i as _,c as N,E as T,u as ee}from"./QUlrCMhF.js";import{a as te,r as ae}from"./Bh7qfYVU.js";import{b as ne}from"./BYZD_0Mv.js";import{p as $,s as se}from"./x-ikr3xO.js";import{s as le}from"./k9G-zKjh.js";import{b as oe}from"./ClMffMaz.js";import{i as re}from"./9WVx9Rbc.js";function pe(t,e,a){M(()=>{var n=P(()=>e(t,a?.())||{});if(a&&n?.update){var l=!1,o={};R(()=>{var s=a();I(s),l&&q(o,s)&&(o=s,n.update(s))}),l=!0}if(n?.destroy)return()=>n.destroy()})}const ce=/<|&#?\w+;/,ie={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},de={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function ue(t,e){const{value:a}=e;if(typeof a=="string")if(t.localName==="title"&&t.namespaceURI==="http://www.w3.org/1999/xhtml")t.textContent=a;else if(!ce.test(a))t.textContent=a;else{const n=t.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");n.innerHTML=a,ye(n.content,t)}A(e,t)}function ye(t,e){for(const a of t.childNodes)if(a.nodeType!==a.TEXT_NODE){if(a.hasAttribute("data-l10n-name")){const n=me(e,a);t.replaceChild(n,a);continue}if(De(a)){const n=he(a);t.replaceChild(n,a);continue}console.warn(`An element of forbidden type "${a.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),t.replaceChild(v(a),a)}e.textContent="",e.appendChild(t)}function fe(t,e){if(!t)return!1;for(let a of t)if(a.name===e)return!0;return!1}function A(t,e){const a=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map(n=>n.trim()):null;for(const n of Array.from(e.attributes))E(n.name,e,a)&&!fe(t.attributes,n.name)&&e.removeAttribute(n.name);if(t.attributes)for(const n of Array.from(t.attributes))E(n.name,e,a)&&e.getAttribute(n.name)!==n.value&&e.setAttribute(n.name,n.value)}function me(t,e){const a=e.getAttribute("data-l10n-name"),n=t.querySelector(`[data-l10n-name="${a}"]`);if(!n)return console.warn(`An element named "${a}" wasn't found in the source.`),v(e);if(n.localName!==e.localName)return console.warn(`An element named "${a}" was found in the translation but its type ${e.localName} didn't match the element found in the source (${n.localName}).`),v(e);t.removeChild(n);const l=n.cloneNode(!1);return S(e,l)}function he(t){const e=t.ownerDocument.createElement(t.localName);return S(t,e)}function v(t){return t.ownerDocument.createTextNode(t.textContent)}function De(t){const e=ie[t.namespaceURI];return e&&e.includes(t.localName)}function E(t,e,a=null){if(a&&a.includes(t))return!0;const n=de[e.namespaceURI];if(!n)return!1;const l=t.toLowerCase(),o=e.localName;if(n.global.includes(l))return!0;if(!n[o])return!1;if(n[o].includes(l))return!0;if(e.namespaceURI==="http://www.w3.org/1999/xhtml"&&o==="input"&&l==="value"){const s=e.type.toLowerCase();if(s==="submit"||s==="button"||s==="reset")return!0}return!1}function S(t,e){return e.textContent=t.textContent,A(t,e),e}var ve=u("<template><!></template>"),Ce=u("<svelte-fluent-overlay></svelte-fluent-overlay>",2);function F(t,e){C(e,!0);let a=U(void 0);const{getTranslation:n}=J(),l=(s,{translation:r,templateNode:c})=>{const y=new MutationObserver(()=>x(r,c));let g;function L(p){const f=g!==p;f&&y.disconnect(),f&&p&&y.observe(p.content,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),g=p}function x(p,f){p&&f&&(s.innerHTML="",s.appendChild(f.content.cloneNode(!0)),ue(s,p))}function w(p){r=p.translation,c=p.templateNode,L(c),x(r,c)}return w({translation:r,templateNode:c}),{update:w,destroy:()=>y.disconnect()}};var o=Ce();B(s=>{var r=ve();j(r);var c=m(r.content);le(c,()=>e.children??z),h(r),oe(r,y=>H(a,y),()=>i(a)),d(s,r)}),te(o,"",{},{display:"contents"}),pe(o,(s,r)=>l?.(s,r),()=>({translation:n(e.id,e.args,!0),templateNode:i(a)})),d(t,o),b()}var be=u('<a data-l10n-name="release-notes" href="https://example.com/" target="_blank" rel="noreferrer"></a>');function ge(t,e){let a=$(e,"productName",3,"Example Product");{let n=V(()=>({productName:a()}));F(t,{id:"info",get args(){return i(n)},children:(l,o)=>{var s=be();d(l,s)},$$slots:{default:!0}})}}function xe(t,e){C(e,!0);let a=$(e,"productName",3,"Example Product");const n=new O("en");n.addResource(K),_(()=>N([n])),ge(t,{get productName(){return a()}}),b()}const we=`<pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">script</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#C586C0">	import</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE">Overlay</span><span style="color:#D4D4D4"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '@nubolab-ffwd/svelte-fluent'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#569CD6">	let</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE">productName</span><span style="color:#D4D4D4"> = </span><span style="color:#CE9178">'Example Product'</span><span style="color:#D4D4D4"> } = $</span><span style="color:#DCDCAA">props</span><span style="color:#D4D4D4">();</span></span>
<span class="line"><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">script</span><span style="color:#808080">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#4EC9B0">Overlay</span><span style="color:#9CDCFE"> id</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"info"</span><span style="color:#9CDCFE"> args</span><span style="color:#D4D4D4">=</span><span style="color:#569CD6">{</span><span style="color:#D4D4D4">{ </span><span style="color:#9CDCFE">productName</span><span style="color:#D4D4D4"> }</span><span style="color:#569CD6">}</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">	&#x3C;</span><span style="color:#569CD6">a</span><span style="color:#9CDCFE"> data-l10n-name</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"release-notes"</span><span style="color:#9CDCFE"> href</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"https://example.com/"</span><span style="color:#9CDCFE"> target</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"_blank"</span><span style="color:#9CDCFE"> rel</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"noreferrer"</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#6A9955">		&#x3C;!-- text from FTL file gets inserted here --></span></span>
<span class="line"><span style="color:#808080">	&#x3C;/</span><span style="color:#569CD6">a</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">&#x3C;/</span><span style="color:#4EC9B0">Overlay</span><span style="color:#808080">></span></span>
<span class="line"></span></code></pre>`,Ee=`<pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#4EC9B0">info =</span></span>
<span class="line"><span style="color:#CE9178">  You can download "</span><span style="color:#569CD6">{</span><span style="color:#9CDCFE"> $productName </span><span style="color:#569CD6">}</span><span style="color:#CE9178">" by clicking</span></span>
<span class="line"><span style="color:#CE9178">  on the &#x3C;strong>Download&#x3C;/strong> button or read</span></span>
<span class="line"><span style="color:#CE9178">  the &#x3C;a data-l10n-name='release-notes'>release notes&#x3C;/a> to learn more.</span></span>
<span class="line"></span></code></pre>`;var ke=u('<dl><dt><label for="overlay-dynamic-text-product-name">productName</label></dt> <dd><input id="overlay-dynamic-text-product-name"/></dd></dl>');function Oe(t){const e=X({productName:"Example Product"});{const a=l=>{var o=ke(),s=D(m(o),2),r=m(s);ae(r),h(s),h(o),ne(r,()=>i(e).productName,c=>G(e,i(e).productName=c)),d(l,o)};let n=k(()=>({"Component.svelte":{code:we,html:!0},"en.ftl":{code:Ee,html:!0}}));T(t,{get sources(){return i(n)},controls:a,children:(l,o)=>{xe(l,se(()=>i(e)))},$$slots:{controls:!0,default:!0}})}}var _e=u('<a data-l10n-name="link" href="https://example.com/"></a>');function Ne(t){F(t,{id:"info",children:(e,a)=>{var n=_e();d(e,n)},$$slots:{default:!0}})}function Te(t,e){C(e,!1);const a=new O("en");a.addResource(ee),_(()=>N([a])),re(),Ne(t),b()}const $e=`<pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#569CD6">script</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#C586C0">	import</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE">Overlay</span><span style="color:#D4D4D4"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> '@nubolab-ffwd/svelte-fluent'</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#808080">&#x3C;/</span><span style="color:#569CD6">script</span><span style="color:#808080">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080">&#x3C;</span><span style="color:#4EC9B0">Overlay</span><span style="color:#9CDCFE"> id</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"info"</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">	&#x3C;</span><span style="color:#569CD6">a</span><span style="color:#9CDCFE"> data-l10n-name</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"link"</span><span style="color:#9CDCFE"> href</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"https://example.com/"</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#6A9955">		&#x3C;!-- text from FTL file gets inserted here --></span></span>
<span class="line"><span style="color:#808080">	&#x3C;/</span><span style="color:#569CD6">a</span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">&#x3C;/</span><span style="color:#4EC9B0">Overlay</span><span style="color:#808080">></span></span>
<span class="line"></span></code></pre>`,Ae=`<pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#4EC9B0">info = </span><span style="color:#CE9178">Read the &#x3C;a data-l10n-name="link">documentation&#x3C;/a> for more information.</span></span>
<span class="line"></span></code></pre>`;function Se(t){{let e=k(()=>({"Component.svelte":{code:$e,html:!0},"en.ftl":{code:Ae,html:!0}}));T(t,{get sources(){return i(e)},children:(a,n)=>{Te(a,{})},$$slots:{default:!0}})}}const Fe={title:"Overlay (experimental)",menuTitle:"Overlay"},{title:Le,menuTitle:Xe}=Fe;var Me=u(`<h1 id="title"> </h1> <blockquote><p><strong>Server-side rendering</strong></p> <p>Due to changes in Svelte’s internal rendering architecture that support async rendering,
server-side rendering is currently disabled when using Svelte <code>5.39.0</code> and later versions.
In these versions the server-side output of Overlays will be an empty element.</p> <p>It’s currently uncertain whether SSR functionality for Overlays can be restored once
Svelte’s internal rendering API stabilizes.</p></blockquote> <p>The experimental Overlay component uses <a href="https://github.com/projectfluent/fluent.js/wiki/DOM-Overlays" rel="noopener noreferrer" target="_blank">fluent.js DOM Overlays</a> to render translation messages that contain HTML markup.</p> <p>DOM overlays provide a safe mechanism for translators to use text-level markup.
They also allow developers to provide functional elements that can be used in translations.</p> <p>Please check the <a href="https://github.com/projectfluent/fluent.js/wiki/DOM-Overlays" rel="noopener noreferrer" target="_blank">fluent.js documentation for DOM Overlays</a> if you want to learn more.</p> <p>Due to the way DOM Overlays are currently implemented in <code>svelte-fluent</code> there are some additional limitations
to the <a href="https://github.com/projectfluent/fluent.js/wiki/DOM-Overlays#limitations" rel="noopener noreferrer" target="_blank">limitations listed in the @fluent/dom wiki</a>:</p> <ul><li>Updates to <code>&lt;Overlay/&gt;</code> component props and children cause a high overhead and should be minimized</li> <li>Svelte actions (<code>&lt;tag use:someaction/&gt;</code>) won’t work correctly for children of the <code>&lt;Overlay/&gt;</code> component</li> <li>Svelte transitions/animations (<code>&lt;tag transition:fade /&gt;</code>) won’t work correctly for children of the <code>&lt;Overlay/&gt;</code> component</li> <li>Svelte bindings (<code>&lt;tag bind:clientWidth=&#123;something&#125; /&gt;</code>) won’t work correctly for children of the <code>&lt;Overlay/&gt;</code> component</li> <li>Event handlers (<code>&lt;tag onclick=&#123;handleClick&#125; /&gt;</code>) bound on children of the <code>&lt;Overlay/&gt;</code> component will not fire</li></ul> <h2 id="snippets"><a href="#snippets">Snippets</a></h2> <div class="responsive-table"><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>children</code></td><td align="left"><code>Snippet</code></td><td align="left">Defines the markup the Overlay is applied upon</td></tr></tbody></table></div> <h2 id="static-text-example"><a href="#static-text-example">Static text example</a></h2> <!> <h2 id="dynamic-text-with-variables-example"><a href="#dynamic-text-with-variables-example">Dynamic text with variables example</a></h2> <!> <h2 id="props"><a href="#props">Props</a></h2> <div class="responsive-table"><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>id</code></td><td align="left"><code>string</code></td><td align="left"><code>undefined</code></td><td align="left">Unique identifier for the translation</td></tr><tr><td align="left"><code>args</code></td><td align="left"><code>Record&lt;string, FluentVariable&gt;</code></td><td align="left"><code>undefined</code></td><td align="left">Arguments for interpolation</td></tr></tbody></table></div>`,1);function Ge(t){var e=Me(),a=Q(e),n=m(a,!0);h(a);var l=D(a,20);Se(l);var o=D(l,4);Oe(o),Y(4),W(()=>Z(n,Le)),d(t,e)}export{Ge as _,Fe as m};
